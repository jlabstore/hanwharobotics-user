<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/sub_layout.html}">
<body>
<div layout:fragment="content">

    <main class="sub notice-view">
        <div class="board board-type1">
            <div class="column">
                <h1>Q&A</h1>
                <!-- <p class="desc">
                  한화로보틱스 제품과<br />서비스 업데이트 소식을<br />알려드립니다.
                </p> -->
                <!--                <p class="desc" th:utext="#{notice}">-->
            </div>

            <div class="column">



                <div>
                    제목 <input id="title" name="title" type="text">
                    내용 <input id="content" name="content" type="text">
                </div>
                <button type="submit" onclick="register()">등록하기</button>



                <div class="board_prev">
                    <a href="javascript:void(0)" onClick="goBack()" th:utext="#{toList}"></a>
                </div>
            </div>


        </div>
    </main>
</div>

</body>

<th:block layout:fragment="script">
    <script>
        $(document).ready(function () {
            getData();
        });

        function goBack(){
            var params = {};
            window.location.search.replace(/[?&]+([^=&]+)=([^&]*)/gi,
                function(str, key, value) {
                    params[key] = value;
                }
            );
            if(params["to"] !== undefined && params["to"]==="main"){
                // location.href="/newsroom/notice";
            }else{
                history.back();
            }
        }

        function register() {

            const title = $('#title').val();
            const content = $('#content').val();

            const jsonData = {
                title: title,
                content: content
            };

            $.ajax({
                type: 'POST',
                url: '/qna/register',
                data: JSON.stringify(jsonData),
                contentType: 'application/json',
                success: function (data) {
                    alert('등록되었습니다.')
                    // window.location.href = '/member/login';
                },

                error: function (xhr, textStatus) {
                    console.error('전송 실패:', textStatus);
                    if (xhr.responseJSON) {
                        const errorMessage = xhr.responseJSON.message;
                        alert(errorMessage);
                    } else {
                        alert('등록에 실패했습니다.');
                    }
                }
            });

        }





    </script>


</th:block>
</html>